---
title: "Emotional Attributes of diverging political spheres on Twitter"
author: "Florian Klement, David Siegl, Shirin Yanni"
output:
  html_document:
    df_print: paged
  pdf_document: default
---


```{r}
library(twitteR)
library(ggplot2)
library(tidyverse)
library(stopwords)
```
<b>Accessing the Twitter-API</b>
```{r}
# consumerKey = "X"  
# consumerSecret = "X"
# accessToken = "X-X"
# accessSecret = "X"
# options(httr_oauth_cache=TRUE)
# setup_twitter_oauth(consumer_key = consumerKey, consumer_secret = consumerSecret,
#                     access_token = accessToken, access_secret = accessSecret)
```
<b>Loading some data</b>
```{r}
sheet <- read.csv("./Emotion Analysis - Twitter.csv")
id_list <- as.list(sheet$Twitter.ID)
```
<b>Defining Function for Twitter-Scraping</b>
```{r}
scrape_tweets <- function(userID, n_tweets, filename){
  tweets <- userTimeline(userID, n_tweets)
  tweets_df <- tbl_df(map_df(tweets, as.data.frame))
  tweets_df <- tweets_df %>%
    select(c(id, text, screenName, created, favoriteCount, retweetCount))
  write.csv(tweets_df, paste(filename,"-tweets.csv", sep = ""), row.names = FALSE)
}

# for (id in id_list) {
#   scrape_tweets(id, 900, id)
# }
```
<b>Loading the Tweets</b>
```{r}
tweets_files <- list.files("./data")

for (i in 1:length(tweets_files)) {                              
  assign(paste0("tweets_", i),                                   
         read.csv(paste0("./data/",
                   tweets_files[i])))
}
```

<b>Preprocessing</b>
```{r}
cleaning_tweets <- function(text){
  text <- gsub(",", "", text)               
  text <- gsub("[[:punct:]]", "", text)
  text <- gsub("[[:digit:]]", "", text)
  words <- strsplit(text, " ")[[1]]           
  words <- tolower(words) 
}
```

